---
# Grafana Instance for EIP Monitoring
apiVersion: grafana.integreatly.org/v1beta1
kind: Grafana
metadata:
  name: eip-monitoring-grafana
  namespace: eip-monitoring
  labels:
    app: eip-monitor
spec:
  config:
    auth:
      disable_login_form: "false"
    security:
      admin_user: "admin"
      admin_password: "admin"
    server:
      root_url: "%(protocol)s://%(domain)s:%(http_port)s/"
  deployment:
    replicas: 1
    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 100m
        memory: 128Mi
    spec:
      template:
        spec:
          containers:
            - name: grafana
              env:
                # Install plugins via GF_INSTALL_PLUGINS environment variable
                # Format: plugin1:version1,plugin2:version2,...
                - name: GF_INSTALL_PLUGINS
                  value: "jdbranham-diagram-panel:1.0.0,natel-discrete-panel:0.0.9,yesoreyeram-boomtable-panel:1.0.0,vonage-status-panel:1.0.7,agenty-flowcharting-panel:1.0.0,grafana-clock-panel:2.1.0,grafana-worldmap-panel:0.3.5"
  service:
    type: ClusterIP
  client:
    preferService: true
  route:
    spec:
      tls:
        termination: edge

